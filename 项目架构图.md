# é¡¹ç›®æ¶æ„å›¾

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    entry.py (å…¥å£)                       â”‚
â”‚                  å¯åŠ¨åº”ç”¨ â†’ ç™»å½• â†’ ä¸»çª—å£                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MainWindow (ä¸»çª—å£æ§åˆ¶å™¨)                    â”‚
â”‚  - ç®¡ç†æ‰€æœ‰é¡µé¢å®ä¾‹                                        â”‚
â”‚  - å­˜å‚¨å…±äº«æ•°æ® (dataset_path, model_pkl_path)           â”‚
â”‚  - å¤„ç†é¡µé¢é—´é€šä¿¡                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                   â†“                   â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Page 1  â”‚        â”‚ Page 3  â”‚        â”‚ Page 4  â”‚
   â”‚ (View)  â”‚        â”‚ (View)  â”‚        â”‚ (View)  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â†“                  â†“                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Handler 1â”‚        â”‚Handler 3â”‚        â”‚Handler 4â”‚
   â”‚(Logic)  â”‚        â”‚(Logic)  â”‚        â”‚(Logic)  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â†“                  â†“                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Worker  â”‚        â”‚ Worker  â”‚        â”‚ Worker  â”‚
   â”‚(Async)  â”‚        â”‚(Async)  â”‚        â”‚(Async)  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â†“                  â†“                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Apriori  â”‚        â”‚Bayesian â”‚        â”‚Predict  â”‚
   â”‚(Core)   â”‚        â”‚(Core)   â”‚        â”‚(Core)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æ–‡ä»¶å¤¹ç»“æ„

```
pyqt_apriori/
â”œâ”€â”€ entry.py                    # ç¨‹åºå…¥å£
â”œâ”€â”€ view/                       # è§†å›¾å±‚
â”‚   â”œâ”€â”€ main_window.py         # ä¸»çª—å£æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ login_window/          # ç™»å½•çª—å£
â”‚   â””â”€â”€ pages/                 # åŠŸèƒ½é¡µé¢
â”‚       â”œâ”€â”€ page_one.py        # æ•°æ®å¯¼å…¥é¡µé¢ (View)
â”‚       â”œâ”€â”€ page_one_handler.py # æ•°æ®å¯¼å…¥ä¸šåŠ¡é€»è¾‘ (Handler)
â”‚       â”œâ”€â”€ page_two.py        # Aprioriè§„åˆ™æŒ–æ˜é¡µé¢ (View)
â”‚       â”œâ”€â”€ page_two_handler.py # è§„åˆ™æŒ–æ˜ä¸šåŠ¡é€»è¾‘ (Handler)
â”‚       â”œâ”€â”€ page_3.py          # è´å¶æ–¯ç½‘ç»œæ„å»ºé¡µé¢ (View)
â”‚       â”œâ”€â”€ page_3_handler.py  # è´å¶æ–¯ç½‘ç»œä¸šåŠ¡é€»è¾‘ (Handler)
â”‚       â”œâ”€â”€ page_4.py           # æ•…éšœé¢„æµ‹è¯„ä¼°é¡µé¢ (View)
â”‚       â”œâ”€â”€ page_4_handler.py  # æ•…éšœé¢„æµ‹ä¸šåŠ¡é€»è¾‘ (Handler)
â”‚       â”œâ”€â”€ page_5.py           # æ•°æ®å¯è§†åŒ–é¡µé¢ (View)
â”‚       â””â”€â”€ page_5_handler.py   # æ•°æ®å¯è§†åŒ–ä¸šåŠ¡é€»è¾‘ (Handler)
â”œâ”€â”€ ui_page/                    # UIå®šä¹‰å±‚
â”‚   â”œâ”€â”€ page_one.ui            # Page 1 çš„ Qt Designer æ–‡ä»¶
â”‚   â”œâ”€â”€ page_two.ui            # Page 2 çš„ Qt Designer æ–‡ä»¶
â”‚   â”œâ”€â”€ page_3.ui              # Page 3 çš„ Qt Designer æ–‡ä»¶
â”‚   â”œâ”€â”€ page_4.ui              # Page 4 çš„ Qt Designer æ–‡ä»¶
â”‚   â”œâ”€â”€ page_5.ui              # Page 5 çš„ Qt Designer æ–‡ä»¶
â”‚   â”œâ”€â”€ ui_page_one.py         # ç”± page_1.ui ç”Ÿæˆçš„ Python ä»£ç 
â”‚   â”œâ”€â”€ ui_page_two.py         # ç”± page_2.ui ç”Ÿæˆçš„ Python ä»£ç 
â”‚   â”œâ”€â”€ ui_page_3.py           # ç”± page_3.ui ç”Ÿæˆçš„ Python ä»£ç 
â”‚   â”œâ”€â”€ ui_page_4.py           # ç”± page_4.ui ç”Ÿæˆçš„ Python ä»£ç 
â”‚   â””â”€â”€ ui_page_5.py           # ç”± page_5.ui ç”Ÿæˆçš„ Python ä»£ç 
â”œâ”€â”€ workers/                    # å¼‚æ­¥ä»»åŠ¡å±‚
â”‚   â”œâ”€â”€ TaskManager.py         # ä»»åŠ¡ç®¡ç†å™¨ (QRunnableå°è£…)
â”‚   â”œâ”€â”€ apriori_worker.py      # Aprioriç®—æ³•å¼‚æ­¥ä»»åŠ¡
â”‚   â”œâ”€â”€ bayesian_worker.py     # è´å¶æ–¯ç½‘ç»œæ„å»ºå¼‚æ­¥ä»»åŠ¡
â”‚   â””â”€â”€ prediction_worker.py   # é¢„æµ‹ä»»åŠ¡å¼‚æ­¥å¤„ç†
â”œâ”€â”€ apriori/                    # Aprioriç®—æ³•æ¨¡å—
â”‚   â”œâ”€â”€ apriori1.py            # Aprioriç®—æ³•æ ¸å¿ƒå®ç°
â”‚   â””â”€â”€ equipment_analyzer.py  # è®¾å¤‡åˆ†æå™¨
â”œâ”€â”€ new_bayesian/              # è´å¶æ–¯ç½‘ç»œæ¨¡å—
â”‚   â”œâ”€â”€ BN_new/                # è´å¶æ–¯ç½‘ç»œæ„å»º
â”‚   â”‚   â””â”€â”€ bn_bayesian.py     # æ ¸å¿ƒç±»: BayesianNetwork
â”‚   â”œâ”€â”€ predict/               # é¢„æµ‹æ¨¡å—
â”‚   â”‚   â””â”€â”€ predict.py         # é¢„æµ‹æ ¸å¿ƒå®ç°
â”‚   â”œâ”€â”€ dataset/               # æ•°æ®é›†ç›®å½•
â”‚   â”œâ”€â”€ pkl/                    # æ¨¡å‹æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ result/                 # ç»“æœè¾“å‡ºç›®å½•
â”œâ”€â”€ common/                     # é€šç”¨å·¥å…·åº“
â”‚   â”œâ”€â”€ config.py              # é…ç½®ç®¡ç† (è¯»å†™ config.json)
â”‚   â”œâ”€â”€ utils.py               # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ my_logger.py           # æ—¥å¿—ç³»ç»Ÿ
â”‚   â””â”€â”€ aes.py                 # AESåŠ å¯†æ¨¡å—
â”œâ”€â”€ components/                 # è‡ªå®šä¹‰ç»„ä»¶åº“
â”‚   â”œâ”€â”€ bar.py                 # è‡ªå®šä¹‰è¿›åº¦æ¡
â”‚   â”œâ”€â”€ icon.py                # å›¾æ ‡ç®¡ç†
â”‚   â”œâ”€â”€ label_widget.py        # è‡ªå®šä¹‰æ ‡ç­¾
â”‚   â””â”€â”€ log_dialog.py          # æ—¥å¿—å¯¹è¯æ¡†
â””â”€â”€ resource/                   # èµ„æºæ–‡ä»¶ç›®å½•
    â”œâ”€â”€ images/                # å›¾ç‰‡èµ„æº
    â”œâ”€â”€ i18n/                  # å›½é™…åŒ–æ–‡ä»¶
    â””â”€â”€ qss/                   # æ ·å¼è¡¨
```

## ğŸ”„ æ•°æ®æµå‘

```
Page 1 (æ•°æ®å¯¼å…¥)
   â†“ file_selected ä¿¡å·
MainWindow.on_file_path_changed()
   â†“ ä¿å­˜ dataset_path
   
Page 2 (Aprioriè§„åˆ™æŒ–æ˜)
   â†“ è¯»å– MainWindow.dataset_path
   â†“ æ‰§è¡Œ Apriori ç®—æ³•
   â†“ initial_rules_ready ä¿¡å·
MainWindow.on_initial_rules_ready()
   â†“ ä¿å­˜ initial_rules_df
   â†“ optimized_rules_ready ä¿¡å·
MainWindow.on_optimized_rules_ready()
   â†“ ä¿å­˜ optimized_rules_df

Page 3 (è´å¶æ–¯ç½‘ç»œæ„å»º)
   â†“ è¯»å– MainWindow.dataset_path
   â†“ æ„å»ºå¹¶è®­ç»ƒè´å¶æ–¯ç½‘ç»œ
   â†“ ä¿å­˜æ¨¡å‹åˆ° MainWindow.model_pkl_path
   â†“ ä¿å­˜ (model, bin_config) åˆ° .pkl æ–‡ä»¶

Page 4 (æ•…éšœé¢„æµ‹)
   â†“ è¯»å– MainWindow.model_pkl_path
   â†“ åŠ è½½ (model, bin_config)
   â†“ æ‰§è¡Œé¢„æµ‹
   â””â”€â”€ æ˜¾ç¤ºç»“æœ
```

## ğŸ¯ å…³é”®è®¾è®¡æ¨¡å¼

### 1. MVC æ¨¡å¼
- **Model**: æ ¸å¿ƒç®—æ³•å±‚ (apriori/, new_bayesian/)
- **View**: è§†å›¾å±‚ (view/pages/*.py)
- **Controller**: Handlerå±‚ (view/pages/*_handler.py)

### 2. Handler åˆ†å±‚æ¶æ„
```python
# View åªè´Ÿè´£ç•Œé¢
class Page4(QWidget, Ui_page_4):
    def __init__(self):
        self.handler = PageFourHandler(self)
        self.bind_event()
    
    def bind_event(self):
        self.pushButton_solely.clicked.connect(
            self.handler.assess_single_instance
        )

# Handler è´Ÿè´£ä¸šåŠ¡é€»è¾‘
class PageFourHandler(QObject):
    def assess_single_instance(self):
        # æ”¶é›†æ•°æ®
        # è°ƒç”¨ Worker
        # å¤„ç†å›è°ƒ
```

### 3. å¼‚æ­¥ä»»åŠ¡æ¨¡å¼
```python
# åˆ›å»ºçº¿ç¨‹å’ŒWorker
self.thread = QThread()
self.worker = PredictionWorker(model_path, data)
self.worker.moveToThread(self.thread)

# è¿æ¥ä¿¡å·
self.thread.started.connect(self.worker.run)
self.worker.finished.connect(self.on_finished)

# å¯åŠ¨çº¿ç¨‹
self.thread.start()
```

### 4. Signal/Slot é€šä¿¡
```python
# é¡µé¢é—´é€šä¿¡
class PageOne(QWidget):
    file_selected = Signal(str)  # å®šä¹‰ä¿¡å·
    
    def select_file(self):
        self.file_selected.emit(file_path)  # å‘å°„ä¿¡å·

class MainWindow(FluentWindow):
    def __init__(self):
        self.pageOne.file_selected.connect(
            self.on_file_path_changed  # è¿æ¥æ§½å‡½æ•°
        )
```

## ğŸ”‘ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### æœ€é‡è¦çš„æ–‡ä»¶
1. **entry.py**: ç¨‹åºå…¥å£
2. **view/main_window.py**: ä¸»çª—å£ï¼Œç®¡ç†æ‰€æœ‰é¡µé¢å’Œå…±äº«æ•°æ®
3. **view/pages/page_4_handler.py**: Page4ä¸šåŠ¡é€»è¾‘
4. **workers/prediction_worker.py**: é¢„æµ‹å¼‚æ­¥ä»»åŠ¡
5. **new_bayesian/predict/predict.py**: é¢„æµ‹æ ¸å¿ƒç®—æ³•
6. **new_bayesian/BN_new/bn_bayesian.py**: è´å¶æ–¯ç½‘ç»œè®­ç»ƒ

### é…ç½®æ–‡ä»¶
- **config.json**: ç”¨æˆ·é…ç½® (ä¸»é¢˜ã€è¯­è¨€ã€è‡ªåŠ¨ç™»å½•ç­‰)
- **requirements.txt**: Pythonä¾èµ–åŒ…

## ğŸ“ å¼€å‘å»ºè®®

### ä¿®æ”¹ç•Œé¢
1. ä½¿ç”¨ Qt Designer ç¼–è¾‘ `ui_page/*.ui`
2. è¿è¡Œ `python pack_resources.py`
3. åœ¨å¯¹åº”çš„ `view/pages/*.py` ä¸­ä½¿ç”¨

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ Handler ä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘
2. å¦‚éœ€å¼‚æ­¥å¤„ç†ï¼Œåˆ›å»º Worker
3. é€šè¿‡ Signal/Slot æ›´æ–°ç•Œé¢

### è°ƒè¯•æŠ€å·§
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º (print/logger)
- æ£€æŸ¥ `logs/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶
- ä½¿ç”¨ DEBUG æ ‡è®°è¿½è¸ªæ•°æ®æµ
